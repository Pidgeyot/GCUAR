<!DOCTYPE html>
<!--
GCU AR Tour
Made by Paige Mabbitt
September 2nd, 2022
-->
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/x-icon" href="lopespatt.png">
    <link rel="stylesheet" href="main.css">
    <script type='text/javascript' src='js/overlay.js'></script>
    <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
    <script src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js'></script>
    <!--Using AR.js tutorial: Displays video using image tracking-->
    <script>
        window.onload = function () {
            AFRAME.registerComponent('videohandler', {
                init: function () {
                    var marker = this.el;

                    this.vid = document.querySelector("#vid");

                    marker.addEventListener('markerFound', function () {
                        this.vid.play();
                    }.bind(this));

                    marker.addEventListener('markerLost', function () {
                        this.vid.pause();
                        this.vid.currentTime = 0;
                    }
                        .bind(this));
                }
            });
        };
    </script>

    <title>GCU AR Tour</title>
</head>

<body style='margin : 0px; overflow: hidden;'>

    <div id="debug">AR</div>
    <div class="arjs-loader">
        <div>Loading, please wait...</div>
    </div>

    <a-scene vr-mode-ui="enabled: false;"
             renderer='antialias: true; alpha: true; precision: medium;'
             embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'>

        <!--Declare assets here: can be differentiated by ID-->
        <a-assets>
            <!--the issue, once again: video either doesn't play (muted) or is constantly playing (un-muted)-->
            <video src="assets/testvid.mp4"
                   preload="auto"
                   id="vid"
                   response-type="arraybuffer"
                   loop webkit-playsinline autoplay muted playsinline>
            </video>
        </a-assets>

        <!--Set up pattern and corresponding content here: Use video ID for identification-->
        <a-nft videohandler
               type='nft' url='assets/lopespatt'
               smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5">
            <a-video src="#vid"
                     position='200 200 -100'
                     rotation='90 0 180'
                     width='300'
                     height='175'>
            </a-video>
        </a-nft>

        <a-nft type="nft"
               url="assets/hiro"
               smooth="true"
               smoothCount="10"
               smoothTolerance=".01"
               smoothThreshold="5">

            <a-entity gltf-model="antelope/antelope.gltf"
                      scale="100 100 100"
                      position="200 200 100">
                <!--"Paula the Antelope" (https://skfb.ly/6B9pO) by Diana Varro is licensed under Creative Commons Attribution (http://creativecommons.org/licenses/by/4.0/).-->
            </a-entity>
        </a-nft>

        <a-entity camera></a-entity>
    </a-scene>

    <!-- Overlay pulled from W3Schools https://www.w3schools.com/howto/howto_css_overlay.asp -->
    <!-- The overlay-->
    <div id="nav" class="overlay">

        <!-- Overlay content -->
        <nav class="overlay-content">
            <a href="tutorial.html">How It Works</a>
            <a href="checklist.html">Checklist</a>
            <a href="https://www.gcu.edu/">GCU School Site</a>
        </nav>

        <!-- Button to close the overlay navigation -->
        <button type="button" href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</button>

    </div>

    <footer>
        <!-- Button to open the overlay navigation -->
        <button type="button" onclick="openNav()" id="ar-open">&#9776;</button>
    </footer>

</body>
</html>